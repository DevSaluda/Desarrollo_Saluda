<?php
include "../Consultas/Consultas.php";
?>
<div class="text-center">
    <div class="table-responsive">
        <table id="CitasExteriores" class="table table-hover">
            <thead>
                <tr>
                    <th>Folio</th>
                    <th>Paciente</th>
                    <th>Tel√©fono</th>
                    <th>Fecha</th>
                    <th>Sucursal</th>
                    <th>M√©dico</th>
                    <th>Turno</th>
                    <th>Motivo Consulta</th>
                    <th>Contacto por WhatsApp</th>
                    <th>Agendado por</th>
                    <th>Agregado el</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function () {
    $('#CitasExteriores').DataTable({
        "processing": true,
        "serverSide": true,
        "ordering": true,
        "stateSave":true,
        "bAutoWidth": false,
        "order": [[ 0, "desc" ]],
        "ajax": {
            "url": "https://saludapos.com/AgendaDeCitas/Consultas/RevaloracionesAgendadas.php",
            "type": "POST"
        },
        "columns": [
            { "data": 0 },
            { "data": 1 },
            { "data": 2 },
            { "data": 3 },
            { "data": 4 },
            { "data": 5 },
            { "data": 6 },
            { "data": 7 },
            { "data": 8, "orderable": false, "searchable": false },
            { "data": 9 },
            { "data": 10 },
            { "data": 11, "orderable": false, "searchable": false }
        ],
        "lengthMenu": [[10,20,150,250,500, -1], [10,20,50,250,500, "Todos"]],
        "language": {
            "lengthMenu": "Mostrar _MENU_ registros",
            "sPaginationType": "extStyle",
            "zeroRecords": "No se encontraron resultados",
            "info": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
            "infoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
            "infoFiltered": "(filtrado de un total de _MAX_ registros)",
            "sSearch": "Buscar:",
            "paginate": {
                "first": '<i class="fas fa-angle-double-left"></i>',
                "last": '<i class="fas fa-angle-double-right"></i>',
                "next": '<i class="fas fa-angle-right"></i>',
                "previous": '<i class="fas fa-angle-left"></i>'
            }
        },
        "drawCallback": function() {
            $(".btn-Asiste").click(function(){
                var id = $(this).data("id");
                $.post("https://saludapos.com/AgendaDeCitas/Modales/AsistenciaPacienteRevaloracion.php", 
                    "id=" + id, 
                    function(data){
                        $("#form-editExt").html(data);
                        $("#TituloExt").html("¬øEl paciente asisti√≥?");
                        $("#DiExt").removeClass("modal-dialog modal-lg modal-notify modal-success");
                        $("#DiExt").addClass("modal-dialog modal-sm modal-notify modal-success");
                    });
                $('#editModalExt').modal('show');
            });
        }
    });
});
</script>
<?php
function fechaCastellano ($fecha) {
    $fecha = substr($fecha, 0, 10);
    $numeroDia = date('d', strtotime($fecha));
    $dia = date('l', strtotime($fecha));
    $mes = date('F', strtotime($fecha));
    $anio = date('Y', strtotime($fecha));
    $dias_ES = array("Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado", "Domingo");
    $dias_EN = array("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday");
    $nombredia = str_replace($dias_EN, $dias_ES, $dia);
  $meses_ES = array("Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre");
    $meses_EN = array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");
    $nombreMes = str_replace($meses_EN, $meses_ES, $mes);
    return $nombredia." ".$numeroDia." de ".$nombreMes." de ".$anio;
  }
?>
<style>
  /* Personalizar el dise√±o de la paginaci√≥n con CSS */
  .dataTables_wrapper .dataTables_paginate {
    text-align: center !important; /* Centrar los botones de paginaci√≥n */
    margin-top: 10px !important;
  }

  .dataTables_paginate .paginate_button {
    padding: 5px 10px !important;
    border: 1px solid #007bff !important;
    margin: 2px !important;
    cursor: pointer !important;
    font-size: 16px !important;
    color: #007bff !important;
    background-color: #fff !important;
  }

  /* Cambiar el color del paginado seleccionado */
  .dataTables_paginate .paginate_button.current {
    background-color: #007bff !important;
    color: #fff !important;
    border-color: #007bff !important;
  }

  /* Cambiar el color del hover */
  .dataTables_paginate .paginate_button:hover {
    background-color: #C80096 !important;
    color: #fff !important;
    border-color: #C80096 !important;
  }
</style>

<style>
  /* Estilos personalizados para la tabla */
  #RevaloracionesSemanales th {
    font-size: 12px; /* Tama√±o de letra para los encabezados */
    padding: 4px; /* Ajustar el espaciado entre los encabezados */
    white-space: nowrap; /* Evitar que los encabezados se dividan en varias l√≠neas */
  }
</style>

<style>
  /* Estilos para la tabla */
  #RevaloracionesSemanales {
    font-size: 12px; /* Tama√±o de letra para el contenido de la tabla */
    border-collapse: collapse; /* Colapsar los bordes de las celdas */
    width: 100%;
    text-align: center; /* Centrar el contenido de las celdas */
  }

  #RevaloracionesSemanales th {
    font-size: 16px; /* Tama√±o de letra para los encabezados de la tabla */
    background-color:#0057b8 !important;; /* Nuevo color de fondo para los encabezados */
    color: white; /* Cambiar el color del texto a blanco para contrastar */
    padding: 10px; /* Ajustar el espaciado de los encabezados */
  }

  #RevaloracionesSemanales td {
    font-size: 14px; /* Tama√±o de letra para el contenido de la tabla */
    padding: 8px; /* Ajustar el espaciado de las celdas */
    border-bottom: 1px solid #ccc; /* Agregar una l√≠nea de separaci√≥n entre las filas */
  }

  /* Estilos para el bot√≥n de Excel */
  .dt-buttons {
    display: flex;
    justify-content: center;
    margin-bottom: 10px;
  }

  .dt-buttons button {
    font-size: 14px;
    margin: 0 5px;
    color: white; /* Cambiar el color del texto a blanco */
    background-color: #fff; /* Cambiar el color de fondo a blanco */
  }

 
</style>

<style>
  /* Estilos para la capa de carga */
  #loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999; /* Asegurarse de que el overlay est√© encima de todo */
    display: none; /* Ocultar inicialmente el overlay */
  }

  /* Estilo para el √≠cono de carga */
  .loader {
    border: 6px solid #f3f3f3; /* Color del c√≠rculo externo */
    border-top: 6px solid #C80096; /* Color del c√≠rculo interno */
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite; /* Animaci√≥n de rotaci√≥n */
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
<script>
  // Definir una lista de mensajes para el mensaje de carga
  var mensajesCarga = [
    "Estamos realizando la b√∫squeda...",
    "Cargando datos...",
    "Procesando la informaci√≥n...",
    "Espere un momento...",
    "Cargando... ten paciencia, incluso los planetas tardaron millones de a√±os en formarse.",

"¬°Espera un momento! Estamos contando hasta el infinito... otra vez.",

"¬øSab√≠as que los ping√ºinos tambi√©n tienen que esperar mientras cargan su comida?",

"¬°Zapateando cucarachas de carga! ¬øQui√©n necesita un exterminador?",

"Cargando... ¬øquieres un chiste para hacer m√°s amena la espera? ¬øPor qu√© los p√°jaros no usan Facebook? Porque ya tienen Twitter.",

"¬°Alerta! Un koala est√° jugando con los cables de carga. Espera un momento mientras lo persuadimos.",

"¬øSab√≠as que las tortugas cargan a una velocidad √©pica? Bueno, estamos intentando superarlas.",

"¬°Espera un instante! Estamos pidiendo ayuda a los unicornios para acelerar el proceso.",

"Cargando... mientras nuestros programadores disfrutan de una buena taza de caf√©.",
"Cargando... No estamos seguros de c√≥mo llegamos aqu√≠, pero estamos trabajando en ello.",

"Estamos contando en binario... 10%, 20%, 110%... espero que esto no sea un error de desbordamiento.",

"Cargando... mientras cazamos pok√©mons para acelerar el proceso.",

"Error 404: Mensaje gracioso no encontrado. Estamos trabajando en ello.",

"Cargando... ¬øSab√≠as que los programadores tambi√©n tienen emociones? Bueno, nosotros tampoco.",

"Estamos buscando la respuesta a la vida, el universo y todo mientras cargamos... Pista: es un n√∫mero entre 41 y 43.",

"Cargando... mientras los gatos toman el control. ¬°Meowtrix est√° en marcha!",

"Estamos ajustando tu espera a la velocidad de la luz. A√∫n no es suficientemente r√°pida, pero pronto llegaremos.",

"Cargando... Ten paciencia, incluso los programadores necesitan tiempo para pensar en nombres de variables.",

"Estamos destilando l√≠neas de c√≥digo para obtener la soluci√≥n perfecta. ¬°Casi listo!",
"‚è≥ Esperando mientras cargamos con paciencia y cuidado.",
"‚åõ Cargando energ√≠a y sonrisas para iluminar el d√≠a.",
"‚è∞ En la espera, tejemos hilos de compasi√≥n y empat√≠a.",
"‚öïÔ∏è Cargando salud y bienestar, un byte a la vez.",
"ü©π Paciencia es la medicina que administramos mientras carga la recuperaci√≥n",
"‚è≥ Cargando tareas, completando metas, un minuto a la vez.",

"‚åõ Organizando pensamientos mientras el reloj carga su siguiente paso.",
"‚è∞ En la pausa de carga, recalibrando el rumbo hacia la productividad.",
"üìÖ Cargando planes para un futuro lleno de posibilidades.",
"üìù Preparando una lista de tareas mientras el mundo carga su siguiente cap√≠tulo.",
"‚è≥ Cargando la pr√≥xima revoluci√≥n tecnol√≥gica... ¬°patience.exe!",

"‚åõ En el mundo digital, incluso la paciencia debe ser procesada.",
"‚è∞ La espera es el precio que pagamos por la maravilla de la tecnolog√≠a.",
"üîå Cargando conexiones mientras la red teje su tela invisible.",
"üíª Esperando mientras la l√≠nea de c√≥digo se carga en el lienzo digital.",
  
"üóìÔ∏è Organiza tu tiempo, controla tus citas y haz que cada momento cuente.",
"‚è∞ La agenda es tu aliada para no perder ni un instante importante. ¬°Aprovecha al m√°ximo tu d√≠a!",
"üìÖ Cada p√°gina de tu agenda es una oportunidad para planificar y crear recuerdos.",
"üìÜ Un d√≠a bien agendado es un paso m√°s cerca de tus objetivos.",
"üï∞Ô∏è La gesti√≥n de citas te da el poder de dirigir tu tiempo y escribir tu historia.",
"üóÇÔ∏è Archiva tus d√≠as con citas bien planificadas y observa c√≥mo se construye tu √©xito.",
"üñäÔ∏è Cada cita agendada es un compromiso contigo mismo y tus metas.",
"üíº Controla tus citas como un profesional: organizaci√≥n es clave.",
"üïäÔ∏è El agendamiento libera tu mente, permiti√©ndote concentrarte en lo que realmente importa.",
"üõ§Ô∏è La agenda es tu camino hacia la eficiencia y la productividad.",
"üìù Escribiendo tu futuro con cada cita agendada.",
"üóÉÔ∏è Citas organizadas, d√≠a por d√≠a, paso a paso hacia el √©xito.",
"üåü Un agendamiento efectivo ilumina tu camino hacia tus sue√±os.",
"üìä Controla tus citas y observa c√≥mo se despliega tu progreso.",
"üéØ Cada cita es un objetivo, y tu agenda es el mapa hacia su logro.",
"üó∫Ô∏è La agenda es tu br√∫jula en el viaje de la productividad personal.",
"üåà Agendar citas es pintar tu vida con colores de planificaci√≥n y logros.",
"‚úçÔ∏è Cada cita es una firma en la hoja de tu tiempo. ¬°Hazlo valer!",
"üìå Cada cita es un clavo en la construcci√≥n de tus metas. Aseg√∫rate de que est√©n bien colocados.",
"üåÑ Agendamiento inteligente: el amanecer de tus d√≠as productivos."];

  // Funci√≥n para mostrar el mensaje de carga con un texto aleatorio
  function mostrarCargando(event, settings) {
    var randomIndex = Math.floor(Math.random() * mensajesCarga.length);
    var mensaje = mensajesCarga[randomIndex];
    document.getElementById('loading-text').innerText = mensaje;
    document.getElementById('loading-overlay').style.display = 'flex';
  }

  // Funci√≥n para ocultar el mensaje de carga
  function ocultarCargando() {
    document.getElementById('loading-overlay').style.display = 'none';
  }

tabla = $('#RevaloracionesSemanales').DataTable({

 "bProcessing": true,
 "ordering": true,
 "stateSave":true,
 "bAutoWidth": false,
 "order": [[ 0, "desc" ]],
 "sAjaxSource": "https://saludapos.com/AgendaDeCitas/Consultas/RevaloracionesSemanal.php",
 "aoColumns": [
    { mData: 'Folio' },
       { mData: 'Paciente' },
       { mData: 'Telefono' },
       { mData: 'Fecha' },
       { mData: 'Sucursal' },
       { mData: 'Medico' },
       { mData: 'Turno' },
       { mData: 'MotivoConsulta' },
       { mData: 'ConWhatsapp' },
       { mData: 'Agendo' },
       { mData: 'RegistradoEl' },
   
      ],
     
    
      "lengthMenu": [[10,20,150,250,500, -1], [10,20,50,250,500, "Todos"]],  
  
  "language": {
  "lengthMenu": "Mostrar _MENU_ registros",
  "sPaginationType": "extStyle",
  "zeroRecords": "No se encontraron resultados",
  "info": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
  "infoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
  "infoFiltered": "(filtrado de un total de _MAX_ registros)",
  "sSearch": "Buscar:",
  "paginate": {
    "first": '<i class="fas fa-angle-double-left"></i>',
    "last": '<i class="fas fa-angle-double-right"></i>',
    "next": '<i class="fas fa-angle-right"></i>',
    "previous": '<i class="fas fa-angle-left"></i>'
  },
  "processing": function () {
    mostrarCargando();
  }
},
"initComplete": function() {
  // Al completar la inicializaci√≥n de la tabla, ocultar el mensaje de carga
  ocultarCargando();
},
// Para personalizar el estilo del bot√≥n de Excel
"buttons": [
  {
    extend: 'excelHtml5',
    text: 'Exportar a Excel  <i Exportar a Excel class="fas fa-file-excel"></i> ',
    titleAttr: 'Exportar a Excel',
    title: 'Lista Pacientes revaloracion [Anexar Fecha]',
    className: 'btn btn-success',
    exportOptions: {
      columns: ':visible' // Exportar solo las columnas visibles
    }
  }
],
// Personalizar la posici√≥n de los elementos del encabezado
"dom": '<"d-flex justify-content-between"lBf>rtip', // Modificar la disposici√≥n aqu√≠
"responsive": true
});
</script>
<div class="text-center">
	<div class="table-responsive">
	<table  id="RevaloracionesSemanales" class="table table-hover">
<thead>
<th>Folio</th>
<th>Paciente</th>
<th>Telefono</th>
<th>Fecha </th>
<th>Sucursal</th>
<th>Medico</th>
<th>Turno</th>
<th>Motivo de Consulta</th>
<th>Contacto por whatsaap</th>

<th>Agendado por </th>
<th>Registrado el </th>
	


</thead>

</div>
</div>



<style>
    .custom-bg-color {
    background-color: #C80096 !important;
}
.custom-bg-color .fa-whatsapp {
    font-size: 1.5em; /* Ajusta el tama√±o seg√∫n tus preferencias */
}
</style>
